{"numFailedTestSuites":2,"numFailedTests":6,"numPassedTestSuites":3,"numPassedTests":10,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":5,"numTotalTests":16,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771660851871,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ComplianceService","validateConsentBeforeSend"],"duration":63,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ComplianceService validateConsentBeforeSend should throw ForbiddenException if contact is opted out entirely","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660855753,"status":"passed","title":"should throw ForbiddenException if contact is opted out entirely"},{"ancestorTitles":["ComplianceService","validateConsentBeforeSend"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ComplianceService validateConsentBeforeSend should throw ForbiddenException if contact has not opted into the channel","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660855817,"status":"passed","title":"should throw ForbiddenException if contact has not opted into the channel"},{"ancestorTitles":["ComplianceService","validateConsentBeforeSend"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ComplianceService validateConsentBeforeSend should pass normally if contact is opted in for the channel","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660855824,"status":"passed","title":"should pass normally if contact is opted in for the channel"},{"ancestorTitles":["ComplianceService","handleOptOut"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ComplianceService handleOptOut should update contact optOut status and clear channels","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771660855832,"status":"passed","title":"should update contact optOut status and clear channels"}],"endTime":1771660855843,"message":"","name":"C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\compliance.service.spec.ts","startTime":1771660853340,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CreditService","deduct"],"duration":38,"failing":false,"failureDetails":[{"type":"CreditService","context":{"index":0,"dependencies":["BusinessRepository",null],"name":"BusinessRepository"},"metadata":{"id":"ddb21e8419f46c45d6b3d"},"moduleRef":{"id":"46229c46dcddb21e8419f"}}],"failureMessages":["Error: Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\nPotential solutions:\n- Is RootTestModule a valid NestJS module?\n- If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n- If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n  @Module({\n    imports: [ /* the Module containing \"BusinessRepository\" */ ]\n  })\n\nFor more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n    at TestingInjector.lookupComponentInParentModules (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:290:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at TestingInjector.resolveComponentWrapper (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-injector.js:19:45)\n    at resolveParam (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:140:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:169:27)\n    at TestingInjector.loadInstance (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:75:13)\n    at TestingInjector.loadProvider (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:103:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:55:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:40:13\n    at async Promise.all (index 1)\n    at TestingInstanceLoader.createInstances (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:74:9)\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\credit.service.spec.ts:16:39)"],"fullName":"CreditService deduct should deduct credits if balance is sufficient","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857475,"status":"failed","title":"should deduct credits if balance is sufficient"},{"ancestorTitles":["CreditService","deduct"],"duration":4,"failing":false,"failureDetails":[{"type":"CreditService","context":{"index":0,"dependencies":["BusinessRepository",null],"name":"BusinessRepository"},"metadata":{"id":"05b09aa2af36f6f8bade2"},"moduleRef":{"id":"6c45d6b3d905b09aa2af3"}}],"failureMessages":["Error: Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\nPotential solutions:\n- Is RootTestModule a valid NestJS module?\n- If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n- If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n  @Module({\n    imports: [ /* the Module containing \"BusinessRepository\" */ ]\n  })\n\nFor more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n    at TestingInjector.lookupComponentInParentModules (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:290:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at TestingInjector.resolveComponentWrapper (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-injector.js:19:45)\n    at resolveParam (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:140:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:169:27)\n    at TestingInjector.loadInstance (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:75:13)\n    at TestingInjector.loadProvider (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:103:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:55:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:40:13\n    at async Promise.all (index 1)\n    at TestingInstanceLoader.createInstances (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:74:9)\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\credit.service.spec.ts:16:39)"],"fullName":"CreditService deduct should throw BadRequestException if balance is insufficient","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857529,"status":"failed","title":"should throw BadRequestException if balance is insufficient"},{"ancestorTitles":["CreditService","deduct"],"duration":4,"failing":false,"failureDetails":[{"type":"CreditService","context":{"index":0,"dependencies":["BusinessRepository",null],"name":"BusinessRepository"},"metadata":{"id":"d0b0b4fe4850ce92f84cd"},"moduleRef":{"id":"f6f8bade2fd0b0b4fe485"}}],"failureMessages":["Error: Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\nPotential solutions:\n- Is RootTestModule a valid NestJS module?\n- If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n- If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n  @Module({\n    imports: [ /* the Module containing \"BusinessRepository\" */ ]\n  })\n\nFor more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n    at TestingInjector.lookupComponentInParentModules (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:290:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at TestingInjector.resolveComponentWrapper (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-injector.js:19:45)\n    at resolveParam (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:140:38)\n    at async Promise.all (index 0)\n    at TestingInjector.resolveConstructorParams (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:169:27)\n    at TestingInjector.loadInstance (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:75:13)\n    at TestingInjector.loadProvider (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\injector.js:103:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:56:13\n    at async Promise.all (index 3)\n    at TestingInstanceLoader.createInstancesOfProviders (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:55:9)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:40:13\n    at async Promise.all (index 1)\n    at TestingInstanceLoader.createInstances (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:39:9)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2\\node_modules\\@nestjs\\core\\injector\\instance-loader.js:22:13)\n    at TestingInstanceLoader.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-instance-loader.js:9:9)\n    at TestingModuleBuilder.createInstancesOfDependencies (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:118:9)\n    at TestingModuleBuilder.compile (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc\\node_modules\\@nestjs\\testing\\testing-module.builder.js:74:9)\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\credit.service.spec.ts:16:39)"],"fullName":"CreditService deduct should throw BadRequestException if business is not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857533,"status":"failed","title":"should throw BadRequestException if business is not found"}],"endTime":1771660857573,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mCreditService › deduct › should deduct credits if balance is sufficient\u001b[39m\u001b[22m\n\n    Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\n    Potential solutions:\n    - Is RootTestModule a valid NestJS module?\n    - If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n    - If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n      @Module({\n        imports: [ /* the Module containing \"BusinessRepository\" */ ]\n      })\n\n    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m         }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m         \u001b[36mconst\u001b[39m module\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m             providers\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m                 \u001b[33mCreditService\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m                 {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.lookupComponentInParentModules (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:290:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveComponentWrapper (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-injector.js\u001b[2m:19:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat resolveParam (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:140:38)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 0)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveConstructorParams (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:169:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadInstance (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:75:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadProvider (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:103:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:56:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 3)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfProviders (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:55:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:40:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 1)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstances (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:39:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:22:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-instance-loader.js\u001b[2m:9:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:118:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.compile (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:74:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/credit.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:16:39)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mCreditService › deduct › should throw BadRequestException if balance is insufficient\u001b[39m\u001b[22m\n\n    Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\n    Potential solutions:\n    - Is RootTestModule a valid NestJS module?\n    - If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n    - If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n      @Module({\n        imports: [ /* the Module containing \"BusinessRepository\" */ ]\n      })\n\n    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m         }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m         \u001b[36mconst\u001b[39m module\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m             providers\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m                 \u001b[33mCreditService\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m                 {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.lookupComponentInParentModules (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:290:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveComponentWrapper (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-injector.js\u001b[2m:19:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat resolveParam (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:140:38)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 0)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveConstructorParams (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:169:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadInstance (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:75:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadProvider (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:103:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:56:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 3)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfProviders (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:55:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:40:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 1)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstances (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:39:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:22:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-instance-loader.js\u001b[2m:9:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:118:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.compile (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:74:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/credit.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:16:39)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mCreditService › deduct › should throw BadRequestException if business is not found\u001b[39m\u001b[22m\n\n    Nest can't resolve dependencies of the CreditService (?, DataSource). Please make sure that the argument \"BusinessRepository\" at index [0] is available in the RootTestModule context.\n\n    Potential solutions:\n    - Is RootTestModule a valid NestJS module?\n    - If \"BusinessRepository\" is a provider, is it part of the current RootTestModule?\n    - If \"BusinessRepository\" is exported from a separate @Module, is that module imported within RootTestModule?\n      @Module({\n        imports: [ /* the Module containing \"BusinessRepository\" */ ]\n      })\n\n    For more common dependency resolution issues, see: https://docs.nestjs.com/faq/common-errors\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m         }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m         \u001b[36mconst\u001b[39m module\u001b[33m:\u001b[39m \u001b[33mTestingModule\u001b[39m \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTest\u001b[39m\u001b[33m.\u001b[39mcreateTestingModule({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m             providers\u001b[33m:\u001b[39m [\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m                 \u001b[33mCreditService\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m                 {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.lookupComponentInParentModules (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:290:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveComponentWrapper (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-injector.js\u001b[2m:19:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat resolveParam (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:140:38)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 0)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.resolveConstructorParams (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:169:27)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadInstance (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:75:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInjector.loadProvider (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/injector.js\u001b[2m:103:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:56:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 3)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfProviders (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:55:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:40:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at async Promise.all (index 1)\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstances (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:39:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+core@11.1.14_@nestj_488fcd591e5c2c52e06716874218c4c2/node_modules/@nestjs/core/injector/instance-loader.js\u001b[2m:22:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingInstanceLoader.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-instance-loader.js\u001b[2m:9:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.createInstancesOfDependencies (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:118:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TestingModuleBuilder.compile (\u001b[22m\u001b[2m../../../node_modules/.pnpm/@nestjs+testing@11.1.14_@ne_3c12c068d6af4247d49797d76634c0bc/node_modules/@nestjs/testing/testing-module.builder.js\u001b[2m:74:9)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/credit.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:16:39)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\credit.service.spec.ts","startTime":1771660853299,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["TemplateService","render"],"duration":40,"failing":false,"failureDetails":[{"matcherResult":{"actual":"Hello {Alice}, welcome!","expected":"Hello Alice, welcome!","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"Hello Alice, welcome!\"\u001b[39m\nReceived: \u001b[31m\"Hello \u001b[7m{\u001b[27mAlice\u001b[7m}\u001b[27m, welcome!\"\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"Hello Alice, welcome!\"\u001b[39m\nReceived: \u001b[31m\"Hello \u001b[7m{\u001b[27mAlice\u001b[7m}\u001b[27m, welcome!\"\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\template.service.spec.ts:36:28)\n    at Promise.finally.completed (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"TemplateService render should correctly replace variables in template content","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857504,"status":"failed","title":"should correctly replace variables in template content"},{"ancestorTitles":["TemplateService","render"],"duration":6,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected constructor: \u001b[32mBadRequestException\u001b[39m\n\nReceived function did not throw","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected constructor: \u001b[32mBadRequestException\u001b[39m\n\nReceived function did not throw\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\template.service.spec.ts:40:77)\n    at Promise.finally.completed (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"TemplateService render should throw BadRequestException for invalid template syntax","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857558,"status":"failed","title":"should throw BadRequestException for invalid template syntax"},{"ancestorTitles":["TemplateService","createTemplate"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TemplateService createTemplate should successfully create and save a template","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1771660857565,"status":"passed","title":"should successfully create and save a template"},{"ancestorTitles":["TemplateService","createTemplate"],"duration":6,"failing":false,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"businessId\": \"b1\", \"channel\": \"SMS\", \"content\": \"text {{x\", \"id\": \"t1\", \"name\": \"promo\"}\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"businessId\": \"b1\", \"channel\": \"SMS\", \"content\": \"text {{x\", \"id\": \"t1\", \"name\": \"promo\"}\u001b[39m\n    at expect (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\expect@30.2.0\\node_modules\\expect\\build\\index.js:2116:15)\n    at Object.<anonymous> (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\template.service.spec.ts:53:19)\n    at Promise.finally.completed (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"TemplateService createTemplate should throw BadRequestException when template rendering fails during simulation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771660857570,"status":"failed","title":"should throw BadRequestException when template rendering fails during simulation"}],"endTime":1771660857625,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTemplateService › render › should correctly replace variables in template content\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"Hello Alice, welcome!\"\u001b[39m\n    Received: \u001b[31m\"Hello \u001b[7m{\u001b[27mAlice\u001b[7m}\u001b[27m, welcome!\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 34 |\u001b[39m         it(\u001b[32m'should correctly replace variables in template content'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 35 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m service\u001b[33m.\u001b[39mrender(\u001b[32m'Hello {{Name}}, welcome!'\u001b[39m\u001b[33m,\u001b[39m { \u001b[33mName\u001b[39m\u001b[33m:\u001b[39m \u001b[32m'Alice'\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 36 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Hello Alice, welcome!'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m         it(\u001b[32m'should throw BadRequestException for invalid template syntax'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/template.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:36:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTemplateService › render › should throw BadRequestException for invalid template syntax\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected constructor: \u001b[32mBadRequestException\u001b[39m\n\n    Received function did not throw\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 38 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m         it(\u001b[32m'should throw BadRequestException for invalid template syntax'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 40 |\u001b[39m             expect(() \u001b[33m=>\u001b[39m service\u001b[33m.\u001b[39mrender(\u001b[32m'Hello {{Name'\u001b[39m\u001b[33m,\u001b[39m { \u001b[33mName\u001b[39m\u001b[33m:\u001b[39m \u001b[32m'Alice'\u001b[39m }))\u001b[33m.\u001b[39mtoThrow(\u001b[33mBadRequestException\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/template.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:40:77)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTemplateService › createTemplate › should throw BadRequestException when template rendering fails during simulation\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31m{\"businessId\": \"b1\", \"channel\": \"SMS\", \"content\": \"text {{x\", \"id\": \"t1\", \"name\": \"promo\"}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 51 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 52 |\u001b[39m         it(\u001b[32m'should throw BadRequestException when template rendering fails during simulation'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 53 |\u001b[39m             \u001b[36mawait\u001b[39m expect(service\u001b[33m.\u001b[39mcreateTemplate(\u001b[32m'b1'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'promo'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mChannel\u001b[39m\u001b[33m.\u001b[39m\u001b[33mSMS\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'text {{x'\u001b[39m))\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[33mBadRequestException\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2m../../../node_modules/.pnpm/expect@30.2.0/node_modules/expect/build/index.js\u001b[2m:2116:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/messaging/services/template.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:53:19)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\template.service.spec.ts","startTime":1771660853303,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["MessagingEngineService","sendMessage"],"duration":57,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"MessagingEngineService sendMessage should throw an error if business is not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660858252,"status":"passed","title":"should throw an error if business is not found"},{"ancestorTitles":["MessagingEngineService","sendMessage"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"MessagingEngineService sendMessage should deduct credits and enqueue a batch job when targeting multiple contacts","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1771660858311,"status":"passed","title":"should deduct credits and enqueue a batch job when targeting multiple contacts"}],"endTime":1771660858321,"message":"","name":"C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\messaging-engine.service.spec.ts","startTime":1771660853310,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["InboxService","sendReply"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"InboxService sendReply should throw NotFoundException if thread does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660858272,"status":"passed","title":"should throw NotFoundException if thread does not exist"},{"ancestorTitles":["InboxService","sendReply"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"InboxService sendReply should send reply via engine, update thread status to OPEN, and return message","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1771660858318,"status":"passed","title":"should send reply via engine, update thread status to OPEN, and return message"},{"ancestorTitles":["InboxService","closeInactiveThreads"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"InboxService closeInactiveThreads should execute query builder to update inactive threads","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771660858327,"status":"passed","title":"should execute query builder to update inactive threads"}],"endTime":1771660858337,"message":"","name":"C:\\Users\\Azeem\\Documents\\github\\Mcom\\vemtap-workspace\\apps\\backend\\src\\modules\\messaging\\services\\inbox.service.spec.ts","startTime":1771660853316,"status":"passed","summary":""}],"wasInterrupted":false}
